\part{the Processor\\from\\Transistors and Gates}
\chapter{The Sense of Wonder in Logiclevel}
\section {ブール代数事始め}
aグループは少なくとも中学のうちにやる,ド・モルガンの定理.分かっていれば,飛ばして構いません.\\
ブール代数というのは,集合と命題についてのいくつかの美しい定理を一般化,数式化するものであり,これについて解くことで,予想に反するような素晴らしい論理式に出会うことができるのです.\footnote{要出典}\\
\subsection{集合}
まず,集合とは何でしょうか.英語で言えばsetです.あるものの任意順序の列,と考えましょう.この,ものっていうのが,分かり辛いので,具体例をあげて考えてみましょう.\\
集合Aというものについて考えてみましょう.\[
A_1:=\{a^3,a^2b,ab^2\}
\]
\[
A_2:=\{a^2b,ab^2,a^3\}
\]
としたとき,
$A_1=A_2$が成り立ちます.なぜなら集合はsetであり,数列ではないため,順序は任意だからです.また,集合には数字としての文字以外も入ることができます.例えば,りんごと言う集合を\{津軽りんご,富士りんご,ニュートン,スティーブジョブズ\}と定義することもできるのです.しかし,それでは一般化して扱い辛いという面もありますので,今回は関知しない事にします.
また,$A:=(A_1=A_2)$の例で言いますと,$a^3$はAの元,と言う言い方をします.要素の事をこう呼ぶのです.
\begin{itembox}[u]{練習}
上の集合Aにとって,$a^2b$は元でしょうか.また,$b^3$はどうでしょうか.\\
\end{itembox}

次に,\[
B:=\{a^2b,ab^2,b^3\}
\]
を定義します.このとき,$a^3$はBの元ではないが,Aの元ではあり,$b^3$はBだけの元である,と言うのです.これを,数式として表すと$a^3\in A, b^3\in B,a^3\not \in B, b^3\not \in A$となります.$\in$とは,左辺の要素が右辺の集合に属していることをあらわします.さて,もう少し集合を増やしましょう.\[
C:=\{c,d,e,f,g\}
\]
さて,ここで,
\[
U\supset A,U\supset B, U\supset C
\]
と定義します.\footnote{このUというのはユニバース,と読み、ある集合空間すべての要素を含む集合を表すとします.}\footnote{$\supset$とは,左辺の集合の\underline{すべての}集合が右辺の集合に属すことをしめす}すると,$a^xb^{3-x}\in U$を満たす$x$についての集合は,$\{x\mid 0 \leq x \leq 3,x \in \mathbb{N} \}$と定まります.
\begin{itembox}[c]{練習}
	$\{x\mid 0 \leq x \leq 3,x \in \mathbb{N}\footnote{自然数} \}$という表記はどういう意味だろうか.考えてみよう.または調べてみよう.
\end{itembox}

さて,上で定義した集合を使いまわします.$a^2b \in A$であり,$a^2b \in B$であるが,これを,
\[
a^2b \in A\cap B
\]
と表すのです.
$c \not \in A$であり,$c \not \in B$であるが,これを
\[
c \not \in A\cup B
\]
と表すのです.$\cap$とはcapと読み,ANDと呼ばれます.この意味についてはのちほど考えていきましょう.また,$\cup$はcupと読み、ORと呼ばれることもしっておいてください.

堅苦しい,新しい記号の連発はひとまずここでおわりにして,自明な事を少し考えてみます.ここで,$U$を4つに分けてみましょう.とりあえず,下の表を埋めてみてください.
\begin{center}
\begin{tabular}{|l|c|r|}
\hline
&Aに含まれるもの&Aに含まれない\\ \hline
Bに含まれるもの& & \\ \hline
Bに含まれないもの& & \\ 
\hline
\end{tabular}
\end{center}
4つにわけられましたね?\\
1.では，$A \cap B$を満たす文字をすべて抜き出してください:\\
2.では，$A \cup B$を満たす文字をすべて抜き出してください:\\
3.では，$A \cap \overline{B}$\footnote{この上を通る棒はバーと呼ばれ,補集合(Uのうちその集合ではない部分)を表します}を満たす文字をすべて抜き出してください:\\
このうち，1.で求めた文字群は，$A \cap B$を満たすことから，AとBのANDと呼ばれます.逆に，AとBのAND集合(集合和)を求める場合には,それを答えればいいのです.
また，$A \cup B$については,2で求めたものである訳です.\\

逆に，$a^2b=ab^2=1$であり,その他は0であったと考えよう.その時，$A \cap B$を満たす集合の要素を取り出すと,値は1であるが,それ以外は0となる.これでニヤリとした人もいればちんぷんかんぷんの人もいるだろう.それでは,一足飛びに論理回路に進む前に,別の観点からもう一度このことについて考えてみよう.
\subsection{命題}
命題とは,一定の条件を満たす質問のようなものだと考えればいいでしょう.まず例を挙げて見てみましょう.これらは命題です.
\begin{itemize}
	\item{ $0 \times 0$は0である.}
	\item{ 第2宇宙速度でタングステン片を投げ上げると無限遠方まで飛んでゆく.}
\end{itemize}
しかしこれらは命題では有りません.
\begin{itemize}
	\item{リンゴは白い}
	\item{うちの車は早い}
\end{itemize}
しかし,これらもこの様に変えれば命題となります.
\begin{itemize}
	\item{すべてのリンゴは,可視光領域の光を表面で等しく99.9\%以上反射する.かつ,リンゴの皮は鏡面とはみなせない.}
	\item{うちの工場は発注が入ってから60秒以内にクライアントに届けることができる.クライアントに届くというのは,発注元の個人に鍵を渡し,ハンコを書類に押してもらう事象をさす.}
\end{itemize}
また,以下のフレーズも命題です.
\begin{itemize}
	\item{1=2である.}
	\item{法隆寺の住職は柿という植物の実を食べながら鐘を撞く.}
\end{itemize}
命題というのは正しくても間違っていても命題であるのです.しかし,客観性のないものは形容詞とはなれません.たとえば,白いと一概に言っても,人によって見方が変わる上に,照明などに依存する問題ですね.早い,というのも未定義なので命題では有りません.しかし,1=2であるというのは間違っているが,\footnote{これを偽であるという.そうでなければ真}少なくとも客観性の有るフレーズでありますし,法隆寺という寺も一意に定まります.\\
すると,命題の中にも正しいものと誤っているもの,両方あるということがわかりましたね.では,命題には真(ただしいということ)か偽(まちがっているということ)かという属性が必ず付いて回ることも理解いただけると思います.すると,真である命題について値を1,偽である命題の値について0と考えると,命題A:$1=2$,命題B:$2^4=4^2$それぞれについて,
\[
AとBが両方成立するかという命題=AかつBであるなら真=偽
\]
であるが,このように命題AとB両方成り立つという命題を数式で$A \wedge B$と表すこととなっています.また,
\[
AとBが少なくともどちらかが成立する=AまたはBであるなら真=真
\]
を$A \vee B$といいます.さて,上の,真偽を数字で表した方法でこれらを表すと,それぞれ,$A \times B=0$,$A + B=1$とかけるのです.

また,Aが真でなければ真であるという,ちょっとひねくれた命題があったと致しますと,これを$\neg A$と表現します.

なんとなく集合の話に似ているな,と思っていただければ今回必要なだけの理解が得られたと思います.
\subsection {bool代数}
さて,集合と命題を少しかじりました.これらはもっとより奥が深くて興味深い学問であって,それはそれで別に調べて欲しいと思います.

ここで,今度は別の切り口から上で学んだ,命題や集合の「包含関係」や「論理否定」,「かつ,または」の考え方を使って代数の話をしましょう.ここからが本題のようなもので,上の部分はちょっとした背景知識です.わからなかったとしても問題ないです.
次のような式について考えます.
\[
z=x+y
\]
一見普通の式ですね.しかし,これらが集合だったと考えたら,どうでしょう.\\
つまり,
\[
z=x\cup y
\]
ということです.または命題だったら…?

いままで,皆さんがやってらした代数というのは,実数や複素数といった,大きさや座標を持つ値を扱ったものだったはずです.しかし,世の中には真偽を表す二値論理を対象とした演算,代数も定義されています.\\
では,それはどういったものでしょうか.
\begin{eqnarray}
	x \wedge x = x \vee x = x\label{eq:beki}\\
x \wedge y = y \wedge x, x \vee y = y \vee x\label{eq:kokan}\\
( x \wedge y ) \wedge z = x \wedge ( y \wedge z ), ( x \vee y ) \vee z = x \vee ( y \vee z )\label{eq:ketsugo}\\
( x \wedge y ) \vee x = x, ( x \vee y) \wedge x = x\label{eq:kyusyu}\\
(x \vee y) \wedge z = (x \wedge z) \vee (x \wedge z), (x \wedge y) \vee z = (x \vee z) \wedge (x \vee z)\label{eq:bunpai}\\
x \vee \neg x = \top, x \wedge \neg x = \bot\label{eq:hogen}
\end{eqnarray}
これらのうち,\(交換律\)(\ref{eq:kokan})や,\(結合律\)(\ref{eq:ketsugo}),\(分配律\)(\ref{eq:bunpai})などは見たことがあるかもしれないが,確かに他の代数でもよく見られる定義であります.

しかし,冪等律(\ref{eq:beki})などはまだ分かるにしても,吸収律(\ref{eq:kyusyu})や補元律(\ref{eq:hogen})などはさっぱりであっても無理はないでしょう.そういうときは元を質していま一度考えてみましょう.

もしわからないとしたら,これは定義なので,これを満たす場合のみ考えればいいんだと開き直るのもまた一つの手です.(背景知識を手に入れた今とあっては,あまりそういうものだと覚えこむことはおすすめしませんが)
\subsection {情報量の単位} 
確率においても,集合の概念は役に立ちます.しかし,確率の概念もまた,計算機科学をささえています.基本的な事柄から見ていきましょう.

あなたがコインを投げたとします.これが表に出る確率は$\frac{1}{2}$だったとします.しかし,それが地面に落ちて,表に出たと分かった瞬間,その確率は1に転じます.裏であれば,0です.\\
また,あなたがコインを投げ,青木先生もコインを投げたとします.あなたのコインが表となる事象をX,青木先生のコインが表となる事象をYとすると,$X \wedge Y$となる確率は$\frac{1}{4}$となります.しかし,Xが1となると,$X \wedge Y$は$\frac{1}{2}$となります.すなわち,コインの表と裏,どちらかが決定することは,コインズトスの事象の確率を2倍にします.

この様に,ある事象Zと,$ \neg Z$とがどちらかに決定されていることを,Zについての情報があるといい,最小の情報量である,Zだったのか,$\neg Z$だったのかを表すbitという単位を用いて,全体の事象がきまっていることが,どれほどの情報を持っているのかを示したりします.


つぎに,あなたが金に困り,あなたの街のかわいいお店で,大きな夢を買うことにしたとします.たとえば6桁の数字がぴたりとあたったときだけあたりである紙っペらを買った場合に,
それがはずれであるかあたりであるかは当然$\frac{1}{2}$ではありませんね.

では,これの当たり外れは果たしてbitで表せるのでしょうか？言い換えると,その籤があたるという事象Xは,余事象\footnote{ある事象が成立しなかったという事象を,ある事象の余事象と呼ぶ}に対してよっぽど小さいのだから,
Xであったとわかった場合にはくじ引きの事象の確率を2倍にするだけでは済まないだろうということです.

しかし,もし,1bitの情報量として扱ったり,またはあなたが当りか外れかしか考えなかったとしたら,それはたしかに$\frac{1}{2}$なのです.
しかし,それはいわば外れの宝くじと当りの宝くじをそれぞれ1枚ずつ目にして,一つを引くということに相違ないのです.
つまり,ロト6に当たると言うことは,その6桁の数字について考えるべき事があるという事です.
重要なのは6桁の数字が当たるということであって,これにはその数字それぞれが一致するという事象の積集合である事象が成立しなければなりません.
さらに言うと,6桁の10進数は$10^6$だけの可能性がありますから,ある事象群の積集合として考えると,$10^6 \simeq 2^20$より,20個のコインがすべて表である確率とだいたい等しいということができるのです.このように,同様に確からしく起こる$A$と$A$の余事象の集合の数列で表そうと考えるとき,bitという単位が役に立ちます.この場合は20bit程度であると言うことができます.


\subsection {ド・モルガンの定理}
ここで,先のブール代数について,重要な法則があります.
先にそれを示します.
\begin{eqnarray}\label{eq:Domorgan}
	\neg x \wedge \neg y = \neg (x \vee y)\\
	\neg x \vee \neg y = \neg (x \wedge y)
\end{eqnarray}
では,(\ref{eq:Domorgan})について証明してみましょう.
\subsection {章末問題}
\section {カルノー図,最小項}
\subsection {真理表†}
\subsection {カルノー図と最小項}
\subsection {章末問題}
\section {論理ゲート}
\subsection {CMOSとTTL回路}
\subsection {XORとNOT,NAND,NOR,愉快な仲間}
\section {組み合わせ回路}
\subsection {回路とブール代数式}
\subsection {case文,マルチプレクサそしてバス}
\subsection {加算器,減算器}
\subsection {遅延,双安定,クリティカルパス}
\subsection {組み合わせループと無安定動作}
\subsection {章末問題}
\chapter{The Practical Logic design engineering}
\section {順序回路}
\subsection {ラッチ,タイミングチャート,フリップフロップ}
\subsection {クロック,離散的,連続的}
\subsection {シフタ,ローレータ,ALU}
\section {Hardware Describtion Language -ハードウェア記述言語-}
\subsection {Verilog, wire, Conbination describtions.}
\subsection {reg, Behavior describtions.}
\subsection {The Simulation Tests.}
\subsection {プログラマブル・ロジックデバイス}

＊† は中学学習範囲
\section {Z80,x86,ARM,MIPSと戯れる}

　　　　　　　B面\\
----------------------------------\\
1.チューリング完全とは？\\
2.メモリ\\
3.マルチプレクサとデコード,そして…\\
4.機械語とアセンブリ,マイクロアーキテクチャ\\
5.スタックフレームと戯れるルーチン\\
6.コンパイラ\\
----------------------------------\\
